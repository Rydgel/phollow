<!doctype html> <html class="no-js" lang="en-US" dir="ltr" itemscope itemtype="http://schema.org/Article" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml"> <head profile="http://purl.org/uF/hAtom/0.1/ http://purl.org/uF/2008/03/" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# phollow: http://ogp.me/ns/fb/phollow#"> <meta charset="UTF-8"> <title>Facebook Like, méthode de partage</title> <link href="https://plus.google.com/116513653525162928064" rel="publisher"> <meta name="title" content="Facebook Like, méthode de partage"> <meta name="author" content="Jérôme Mahuet"> <meta name="Copyright" content="Copyright Jérôme Mahuet 2013. All Rights Reserved."> <meta name="google-site-verification" content="b3k5NRe5t9U-Pk1_CK_g5oN0U12YXuc55rUQWCHgbZY"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@phollow"> <meta name="twitter:creator" content="@phollow"> <meta property="og:url" value="http://phollow.fr/2011/03/facebook-like-methode-de-partage/"> <meta property="og:description" value="Facebook a rajouté tout récemment de nouvelles fonctionnalités à son bouton like. Ce bouton — un peu le cheval de Troie de Facebook sur le web — devient maintenant une alternative intéressante, et obligatoire, au Facebook Share. Il faut ..."> <meta property="og:image" value="http://phollow.fr/images/phollow-logo3.png"> <meta property="og:type" content="phollow:post"> <meta property="og:site_name" content="Phollow.me"> <meta property="fb:admins" content="rydgel"> <meta property="fb:app_id" content="101739241646"> <meta itemprop="name" content="Facebook Like, méthode de partage"> <meta property="og:title" value="Facebook Like, méthode de partage"> <meta http-equiv="cleartype" content="on"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <script type="text/javascript">
    (function() {
      var config = {
        kitId: 'jfp7vgn',
        scriptTimeout: 3000
      };
      var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
    })();
  </script> <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml"> <link rel="stylesheet" href="/css/screen.css?v=107"> <!--[if lt IE 9]><script src="/js/compiled/modernizr.min.js"></script><![endif]--> </head> <body> <header role="post"> <div class="container"> <h1 id="logo"> <a href="/" title="Phollow.me"> <img src="/images/phollow-logo3.png" alt="Phollow.me"> </a> </h1> </div> </header> <section role="articles"> <div class="container"> <article class="post"> <time datetime="2011-03-01 23:54:37 +0100">Mar 1, 2011</time> <h2 class="entry-title"> <a title="Facebook Like, méthode de partage" href="/2011/03/facebook-like-methode-de-partage">Facebook Like, méthode de partage</a> </h2> <section role="post-content"> <p style="text-align: justify;">Facebook a rajouté tout récemment de nouvelles fonctionnalités à son bouton <strong>like</strong>. Ce bouton — <em>un peu le cheval de Troie de Facebook sur le web</em> — devient maintenant une alternative intéressante, et <em>obligatoire</em>, au Facebook Share. Il faut dire qu'avant le partage se limitait à une simple ligne sur le profil du <em>likeur</em>. Voyons ce qui change et comment l'intégrer sur <strong>Wordpress</strong> par exemple.</p> <img class="alignnone size-medium wp-image-3146" title="amis-facebook" src="http://static.phollow.fr/2011/03/amis-facebook-537x314.jpg" alt="" width="537" height="314"/> <p style="text-align: justify;">Désormais le simple fait de “ liker ” une page, pourra poster sur votre profil tout un tas d'informations. Le titre de la page, une description et pourquoi pas une image. En fait c'est exactement le même modèle de ce que faisait le vieux bouton bleu moche <strong>Facebook Share</strong>.</p> <p style="text-align: justify;">Le bouton like fonctionne avec le protocole <strong>Open Graph</strong>. Concrètement ce protocole permet à Facebook de s'insérer dans n'importe quel site web. Dans ce protocole, Facebook a définit certaines balises Meta qui vont contenir la carte d'identité de la page web. Le titre, l'URL, la description, la catégorie etc.</p> <div class="highlight"><pre><code class="html"><span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span>
<span class="na">xmlns:og=</span><span class="s">&quot;http://ogp.me/ns#&quot;</span>
<span class="na">xmlns:fb=</span><span class="s">&quot;http://www.facebook.com/2008/fbml&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>The Rock (1996)<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:title&quot;</span> <span class="na">content=</span><span class="s">&quot;The Rock&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:type&quot;</span> <span class="na">content=</span><span class="s">&quot;movie&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:url&quot;</span> <span class="na">content=</span><span class="s">&quot;http://www.imdb.com/title/tt0117500/&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:image&quot;</span> <span class="na">content=</span><span class="s">&quot;http://ia.media-imdb.com/rock.jpg&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:site_name&quot;</span> <span class="na">content=</span><span class="s">&quot;IMDb&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;fb:admins&quot;</span> <span class="na">content=</span><span class="s">&quot;USER_ID&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:description&quot;</span><span class="err"> </span><span class="na">content=</span><span class="s">&quot;A group of U.S. Marines, under command of a renegade general, take over Alcatraz and threaten San Francisco Bay with biological weapons.&quot;</span><span class="nt">/&gt;</span>
...
<span class="nt">&lt;/head&gt;</span>
...
<span class="nt">&lt;/html&gt;</span>
</code></pre></div> <p style="text-align: justify;">Vous pouvez trouver une liste exhaustive de ces attributs sur la <a href="http://developers.facebook.com/docs/opengraph/" target="_blank">documentation</a> de Facebook.</p> <p style="text-align: justify;">Ces éléments sont nécessaires pour profiter à 100% du widget Facebook. Le bouton en lui-même s'insère facilement.</p> <div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://connect.facebook.net/fr_FR/all.js#xfbml=1&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;fb:like</span> <span class="na">href=</span><span class="s">&quot;http://phollow.fr&quot;</span> <span class="na">show_faces=</span><span class="s">&quot;true&quot;</span> <span class="na">width=</span><span class="s">&quot;450&quot;</span><span class="nt">&gt;&lt;/fb:like&gt;</span>
</code></pre></div> <p style="text-align: justify;">L'attribut <em>href</em>, vous l'avez compris, pointe vers la page à partager. C'est sur cette même page que les balises Open Graph devront être. Maintenant prenant l'exemple d'un blog, sous Wordpress. Chacun de vos articles aura dans le header les balises Meta qui le décriront en gros, et un bouton <em>like</em> présent à la fin du billet pour le partager. Ce qui peut être sympa, c'est de récupérer une image de l'article en question pour l'afficher lors du partage.</p> <p style="text-align: justify;">Pour cela il faut modifier un peu le thème du blog. On ouvre functions.php, et on ajoute cette fonction :</p> <div class="highlight"><pre><code class="php"><span class="x">function premiere_image() {</span>
<span class="x">global $post, $posts;</span>
<span class="x">$first_img = &#39;&#39;;</span>
<span class="x">ob_start();</span>
<span class="x">ob_end_clean();</span>
<span class="x">$output = preg_match_all(&#39;//i&#39;, $post-&gt;post_content, $matches);</span>
<span class="x">$first_img = $matches [1] [0];</span>

<span class="x">if(empty($first_img)){ //Si il n&#39;y a pas d&#39;image dans le billet</span>
<span class="x">$first_img = &quot;/images/default.jpg&quot;; // On en met une par défaut</span>
<span class="x">}</span>
<span class="x">return $first_img;</span>
<span class="x">}</span>
</code></pre></div> <p style="text-align: justify;">Avec cette fonction, on va maintenant éditer le fichier <em>header.php</em> du thème pour modifier les balises meta.</p> <div class="highlight"><pre><code class="html"><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:type&quot;</span> <span class="na">content=</span><span class="s">&quot;blog&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:site_name&quot;</span> <span class="na">content=</span><span class="s">&quot;&lt;?php bloginfo(&#39;name&#39;); ?&gt;&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:country_name&quot;</span> <span class="na">content=</span><span class="s">&quot;French&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;fb:admins&quot;</span> <span class="na">content=</span><span class="s">&quot;rydgel&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;fb:app_id&quot;</span> <span class="na">content=</span><span class="s">&quot;101739241646&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:email&quot;</span> <span class="na">content=</span><span class="s">&quot;rydgel@phollow.fr&quot;</span> <span class="nt">/&gt;</span>
<span class="cp">&lt;?php if(is_single()) :?&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:url&quot;</span> <span class="na">content=</span><span class="s">&quot;&lt;?php the_permalink() ?&gt;&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:image&quot;</span> <span class="na">content=</span><span class="s">&quot;&lt;?php echo premiere_image() ?&gt;&quot;</span><span class="nt">/&gt;</span>
<span class="cp">&lt;?php endif; ?&gt;</span>
</code></pre></div> <p style="text-align: justify;">Et voilà ça devrait suffire !</p> <p style="text-align: justify;">Maintenant on peut se poser la question de la pertinence de la chose. On avait à la base l'action de partager et l'action d'aimer. Désormais le simple fait d'aimer un truc, nous le fait partager. Admettons. Mais si je veux partager sans aimer ?</p> </section> <section role="share"> <a href="https://twitter.com/share" class="twitter-share-button" data-via="phollow">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> </section> </article> </div> </section> <footer> <div class="container"> <p><a href="http://jrm.li" target="_blank">Jérôme Mahuet</a> - Hosted by <a href="http://heroku.com">Heroku</a> &amp; <a href="https://github.com/Rydgel/phollow">open-source</a>.</p> </div> </footer> </body> </html>