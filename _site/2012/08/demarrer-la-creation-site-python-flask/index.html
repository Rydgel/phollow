<!doctype html>
<html class="no-js" lang="fr" dir="ltr" itemscope itemtype="http://schema.org/Article" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">
<head id="phollow-fr" data-template-set="html5-phollow-wordpress-theme" profile="http://purl.org/uF/hAtom/0.1/ http://purl.org/uF/2008/03/" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# phollow: http://ogp.me/ns/fb/phollow#">
  <meta charset="UTF-8">
  <title>Démarrer la création d’un site avec Python et Flask</title>
  <link href="https://plus.google.com/116513653525162928064" rel="publisher">
  <meta name="title" content="Démarrer la création d’un site avec Python et Flask">
  <meta name="author" content="Jérôme Mahuet">
  <meta name="Copyright" content="Copyright Jérôme Mahuet 2012. All Rights Reserved.">
  <meta name="google-site-verification" content="b3k5NRe5t9U-Pk1_CK_g5oN0U12YXuc55rUQWCHgbZY">
  <meta property="og:title" content="Démarrer la création d’un site avec Python et Flask">
  <meta property="og:type" content="phollow:post">
  <meta property="og:site_name" content="Phollow.me">
  <meta property="fb:admins" content="rydgel">
  <meta property="fb:app_id" content="101739241646">
  <meta itemprop="name" content="Démarrer la création d’un site avec Python et Flask">
  <meta http-equiv="cleartype" content="on">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml">
  <link rel="stylesheet" href="http://f.fontdeck.com/s/css/gZ5nfPju/xX9Gas/rZ9ymPUCM/4/phollow.fr/19429.css" type="text/css">
  <script src="/js/compiled/modernizr.min.js"></script>
  
  <link rel="stylesheet" href="/css/compiled/global.css?v=27">
</head>
<body>
  <div class="container" role="wrapper">
    <header role="banner" id="header-site" class="sixteen columns">
      <h1 id="logo" class="four columns alpha">
        <a href="/" title="Phollow.me">
          <img src="/images/phollow-logo.png" alt="Phollow.me">
        </a>
      </h1>
      <nav role="main-navigation" class="seven columns">
        <ul>
          <li>
            <a href="/" title="blog">
            <span class="ss-icon ss-write"></span>
            <span>Blog</span>
            </a>
          </li>
          <li>
            <a href="/archives/" title="archives">
            <span class="ss-icon ss-database"></span>
            <span>#old</span>
            </a>
          </li>
          <li>
            <a href="http://jrm.li/projects" title="Projets">
            <span class="ss-icon ss-notebook"></span>
            <span>Projets</span>
            </a>
          </li>
          <li>
            <a href="http://jrm.li/" title="À propos">
            <span class="ss-icon ss-user"></span>
            <span>Me</span>
            </a>
          </li>
          <li>
            <a href="http://feeds2.feedburner.com/phollow/iuEO" title="RSS">
            <span class="ss-icon ss-rss"></span>
            <span>Rss</span>
            </a>
          </li>
        </ul>
      </nav>
      <hr style="border-bottom: 1px solid rgba(0, 0, 0, 0.02);">
    </header>

<div id="container" class="sixteen columns">
  <article class="post">
      <header>
    <h2 class="entry-title entry-single"><a href="/2012/08/demarrer-la-creation-site-python-flask">Démarrer la création d’un site avec Python et Flask</a></h2>
    
      <p class="desc">Préparer le projet de la bonne façon.</p>
    
      </header>
      <hr style="border-bottom: 1px solid rgba(0, 0, 0, 0.02);">
      <div class="entry single-page ten columns offset-by-three alpha">
        <p class="fullsizestuff" style="margin-bottom: 60px;">
<img src="http://static.phollow.fr/2012/08/flask.png" alt="Flask">
</p>


<p>J’avais envie depuis quelques jours de faire une série d’articles sur <strong>Python</strong> et le développement d’applications web. D’une part pour montrer que ce n’est pas plus compliqué qu’un projet PHP et d’un autre côté pour montrer qu’on perd moins de temps pour faire quelque chose de propre (pas besoin de palier aux <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">bizarreries</a> du langage).</p>

<p>Si vous n’avez jamais rien testé d’autre que PHP comme <em>langage de programmation</em> (back-end), faites-vous une faveur et sortez de votre zone de comfort. Il n’en sortira que du bon, c’est promis.</p>

<p>On va débuter, dans cet article, par mettre en place son projet de la meilleure façon qui soit. Et d’autres articles viendront par la suite pour montrer certains aspects du web-dev (base de données, sessions, templates, tests unitaires, <abbr>AJAX</abbr>, cache et optimisations, déploiement…). Le tout surement sur le thème d’une petite application. <em>Je n’ai pas encore trouvé le sujet.</em></p>

<p><img src="http://imgs.xkcd.com/comics/python.png" title="Python" alt="Python" /></p>

<h3>Python</h3>

<p>Python existe en ce moment sous 2 versions majeures : 2.X et 3.X. Je vous conseille de dévélopper avec la branche 2.X sauf si vous avez une bonne raison de faire le contraire. La version 3 est en plein développement et beaucoup de bibliothèques Python n’ont pas fait encore le grand saut. La dernière version à l’heure où j’écris ces lignes est la <strong>2.7.3</strong></p>

<h3>Installer Python</h3>

<p>Python est pré-installé sur Ubuntu, et OS X. Même si ces versions sont suffisantes pour faire tourner les examples de codes que je vais donner, il est préférable d’utiliser une version à jour pour un développement plus sérieux.</p>

<ul>
<li><a href="http://docs.python-guide.org/en/latest/starting/install/osx/">Installation sous OS X</a></li>
<li><a href="http://docs.python-guide.org/en/latest/starting/install/linux/">Installation sous GNU/Linux, *BSD</a></li>
<li><a href="http://docs.python-guide.org/en/latest/starting/install/win/">Installation sous Windows</a></li>
</ul>


<h3>Virtualenv</h3>

<p>Python possède une quantité incroyable d’extensions/bibliothèques que vous pouvez installer et utiliser dans vos projets. Mais quand on travaille sur plusieurs projets à la fois (et pas forcément que sur du web), on peut arriver à des problèmes de dépendances. <em>Mon projet A nécessite truc en version 1, mon projet B truc en version 2…</em></p>

<p>Une bonne pratique consiste à créer un environnement virtuel pour nos packages, avec un outil comme <a href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>, de cette manière cet environnement sera complétement indépendant du reste du système.</p>

<div class="highlight"><pre><code class="bash">easy_install virtualenv
virtualenv mon_projet
<span class="nb">cd </span>mon_projet
<span class="nb">source </span>bin/activate <span class="c"># pour l&#39;activer</span>
</code></pre>
</div>


<p>Le répertoire <strong>mon_projet</strong> sera crée avec tout le nécessaire. Si votre prompt change légèrement, c’est que la manipulation a fonctionné. Virtualenv est très puissant, vous pouvez même lui passer la version de Python en paramètre.</p>

<pre><code>virtualenv -p /usr/local/bin/python3.3 mon_projet
virtualenv -p /usr/local/bin/pypy mon_projet
</code></pre>

<p>C’est équivalent à ce que l‘on peut trouver chez Ruby avec Bundler. Pour désactiver un virtualenv il suffit de lancer la commande <code>deactivate</code> dans le terminal.</p>

<h3>Flask</h3>

<p>Flask est un micro-framework et je pense qu’il est du coup beaucoup plus approprié dans l’apprentissage du langage Python. Contrairement à Django qui fait beaucoup de choses tout seul (ORM, validations formulaires, back-end admin…), Flask reste simple et c’est à vous de lui coder/rajouter ces composants à la main (BYOB). On en sort avec un framework flexible où je ne ressens, <em>personnellement</em>, pas de contrainte à travailler avec.</p>

<p>Parmis les avantages de Flask, on retrouve :</p>

<ul>
<li>Base code minimale, environ 800 lignes.</li>
<li>Très bien testé, environ 1 500 lignes.</li>
<li>Très bonne documentation (plus de 200 pages).</li>
<li>Possède un système de template (Jinja2).</li>
<li>Pousse à coder son application sous forme de services, ce qui est une bonne chose.</li>
</ul>


<p>Installons Flask avec <strong>pip</strong> :</p>

<pre><code>pip install Flask
</code></pre>

<p>Une fois installé, on va écrire notre premier script. Pour cela on va créer un dossier <code>mon_projet/app</code> et à la racine de ce dossier un fichier <code>mon_projet/app/app.py</code>, comme par exemple :</p>

<div class="highlight"><pre><code class="python"><span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;Hello World!&quot;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre>
</div>


<p>Pour tester ce code, il suffit juste de lancer la commande suivante. Et d’ouvrir le navigateur sur l’URL qui sera affichée dans la console.</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>python app.py
 * Running on http://127.0.0.1:5000/
</code></pre>
</div>


<h3>GIT</h3>

<p>Et pour faire les choses bien, on va se créer un dépôt GIT et <em>commiter</em> tout ça. Mais avant on rajoute le <code>.gitgnore</code> qui va bien.</p>

<pre><code>venv
*.pyc
.env
.DS_Store
</code></pre>

<p>On crée le dépôt, on rajoute les fichiers et on commit avec un message <em>explicite</em>. On peut même rajouter des supers emojis sur <a href="http://www.emoji-cheat-sheet.com/">Github</a>.</p>

<pre><code>git init
git add .
git commit -m ":sparkle: First commit :sparkle:"
</code></pre>

<h3>Next step</h3>

<p>La documentation de Flask est vraiment bien foutue, à partir de là, si vous êtes intéressé, <a href="http://flask.pocoo.org/docs/quickstart/">le quickstart</a> peut vous permettre de débuter rapidement avec le framework. En attendant je réfléchis à la suite de cet article.</p>

<p style="text-align:center;font-size: 2em;">❧</p>


      </div>
      <cite class="omega three columns entry-meta">
        <p>
          <time datetime="2012-08-15 01:00:00 +0200" pubdate class="updated ss-clock">August 15, 2012</time>
          <br>
          <span class="ss-tag"><a href="/category/python" rel="category tag">python</a>, <a href="/category/web" rel="category tag">web</a></span>
          <br>
          
          <span class="ss-link"><a href="http://j.mp/NAd5uQ">j.mp/NAd5uQ</a></span>
          
        </p>
        </cite>
      <footer class="share alpha twelve columns offset-by-three">
      <a id="tweet" href="http://twitter.com/?status=D%C3%A9marrer%20la%20cr%C3%A9ation%20d%E2%80%99un%20site%20avec%20Python%20et%20Flask%20http%3A%2F%2Fphollow.fr/2012/08/demarrer-la-creation-site-python-flask%20via%20%40phollow" class="ss-icon ss-social ss-twitter twitter-button">&nbsp;<span>Partager</span></a>
      </footer>
    </article>
      <hr>
      <div id="disqus_thread"></div>
      <script>
          var disqus_shortname = 'phollowfr';
          var disqus_identifier = 'http://phollow.fr/2012/08/demarrer-la-creation-site-python-flask/';
          var disqus_url = 'http://phollow.fr/2012/08/demarrer-la-creation-site-python-flask/';

          (function() {
              var dsq = document.createElement('script');
              dsq.type = 'text/javascript'; 
              dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
</div>


<footer id="footer" role="contentinfo" class="sixteen columns">
  <nav role="navigation">
    <ul>
      <li><a href="/">Homepage</a></li>
      <li><a href="http://twitter.com/phollow">Twitter</a></li>
      <li><a href="https://www.facebook.com/Phollow.fr">Facebook</a></li>
      <li><a href="http://dribbble.com/phollow">Dribbble</a></li>
      <li><a href="mailto:rydgel@phollow.fr">Contact</a></li>
    </ul>
  </nav>
  <span class="copyright">Copyright © 2012 <a rel="author"
      href="https://plus.google.com/113221045987282389062?rel=author"
      title="Jérôme Mahuet">+Jérôme Mahuet</a> All Rights Reserved.
    Hosted by <a href="http://www.heroku.com/">Heroku.</a></span>
<a title="Phollow.me" class="footer-logo-link" href="http://phollow.fr"><img src="/images/phollow-logo-footer.png" alt="Phollow.me"></a>
</footer>

</div><!-- container -->
<script src="/js/compiled/global.js?v=8"></script>

<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4ec64821f5a1f55c33000003');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
</body>
</html>

